<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305825 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="342"/>

<div>
<span><div><font size="2"><span style="line-height: 13.600000381469727px;">day11</span></font></div><div><span style="font-size: 9pt;"><br/></span></div><div><span style="font-size: 9pt;">nodeJs:</span></div><div><span style="font-size: 9pt;">    干嘛的： 写后台管理程序</span></div><div><span style="font-size: 9pt;">    类似：php  .net   java(jsp) ....</span></div><div><span style="font-size: 9pt;">    优点： nodejs 就是js</span></div><div><span style="font-size: 9pt;">          性能高，入门难度低，bat公司都在用</span></div><div><span style="font-size: 9pt;">    缺点：服务器提供的少,有用学习资料</span></div><div><span style="font-size: 9pt;">环境：nodejs + web服务器 + 数据库</span></div><div><span style="font-size: 9pt;">    php -&gt; wamp    w:window a:aphche m:mysql P:php</span></div><div><span style="font-size: 9pt;">        -&gt; php mysql</span></div><div><span style="font-size: 9pt;">        php 后台管理  </span></div><div><span style="font-size: 9pt;">        库    mysql    库本身</span></div><div><span style="font-size: 9pt;">        库UI工具:  操作库的</span></div><div><span style="font-size: 9pt;">        操作库方式:</span></div><div><span style="font-size: 9pt;">            命令行</span></div><div><span style="font-size: 9pt;">            后台管理</span></div><div><span style="font-size: 9pt;">            UI库管理工具   phpmyadmin navicat ...</span></div><div><span style="font-size: 9pt;">nodejs:</span></div><div><span style="font-size: 9pt;">        安装：</span><a href="https://nodejs.org/en/" style="font-size: 9pt;">https://nodejs.org/en/</a></div><div><span style="font-size: 9pt;">        镜像：</span><a href="https://npm.taobao.org/" style="font-size: 9pt;">https://npm.taobao.org</a></div><div><span style="font-size: 9pt;">            nodejs 环境     npm 环境</span></div><div><span style="font-size: 9pt;">版本：</span></div><div><span style="font-size: 9pt;">    Vx(主).x(子).x（修正）</span></div><div><span style="font-size: 9pt;">    主版本： 变化了，1/3的API发生巨变 , 使用方式变化了</span></div><div><span style="font-size: 9pt;">    子：    API没有删减，使用方式没变化,内部实现发生了变化</span></div><div><span style="font-size: 9pt;">    修正版：什么都没变，处理一下bug</span></div><div><span style="font-size: 9pt;">    V6.8.x   稳定</span></div><div><span style="font-size: 9pt;">    V6.9.x 非稳定版</span></div><div><span style="font-size: 9pt;">    编写：</span></div><div><span style="font-size: 9pt;">        IDE：webstrom ...Hb        √</span></div><div><span style="font-size: 9pt;">        编辑器: sub烂 ...  vc  atom</span></div><div><span style="font-size: 9pt;">        命令行环境下，输入node    回车</span></div><div><span style="font-size: 9pt;">            编写+运行</span></div><div><span style="font-size: 9pt;">    运行：</span></div><div><span style="font-size: 9pt;">        命令行: dos命令行    ctrl+r -&gt; cmd -&gt;</span></div><div><span style="font-size: 9pt;">                linux命令行(git)</span></div><div><span style="font-size: 9pt;">            node 文件名.[后缀]</span></div><div><span style="font-size: 9pt;">        命令行环境下，输入node 回车</span></div><div><span style="font-size: 9pt;">            编辑+输出</span></div><div><span style="font-size: 9pt;">        IDE环境：    run     √</span></div><div><span style="font-size: 9pt;">                    IDE环境下的dos/linux</span></div><div><span style="font-size: 9pt;">    注意：</span></div><div><span style="font-size: 9pt;">        BOM / DOM 不支持</span></div><div><span style="font-size: 9pt;">        ECMA 支持</span></div><div><span style="font-size: 9pt;">        需要nodejs提供:</span></div><div><span style="font-size: 9pt;">            数据服务，文件服务,访问库,web服务</span></div><div><span style="font-size: 9pt;">http:  协议  和后台沟通，要求提供一些服务</span></div><div><span style="font-size: 9pt;">服务器:</span></div><div><span style="font-size: 9pt;">    web服务器:    apache , ngnix , tomcat,....        node自建服务器</span></div><div><span style="font-size: 9pt;">    数据库服务器: sqlserver, mysql , mongoDB,oran.....</span></div><div><span style="font-size: 9pt;">    后台管理:    php / java /nodejs</span></div><div><span style="font-size: 9pt;">大后端:</span></div><div><span style="font-size: 9pt;">    用户 - &gt; 地址栏(http[s]请求) -&gt; web服务器（收到) - &gt; nodejs处理请求(返回静态、动态)-&gt;请求数据库服务(返回结果)-&gt;nodejs(接收)-&gt;渲染页面-&gt;浏览器（接收页面，完成最终渲染)</span></div><div><span style="font-size: 9pt;">大前端:</span></div><div><span style="font-size: 9pt;">    前端 - &gt; http[s]请求 -&gt; web服务器（收到) - &gt; nodejs处理请求(返回静态、动态)-&gt;请求数据库服务(返回结果)-&gt;nodejs(接收)-&gt;返回给前端(渲染)-&gt;浏览器（接收页面，完成最终渲染)</span></div><div><span style="font-size: 9pt;">nodejs手动搭建web服务器</span></div><div><span style="font-size: 9pt;">    1） 引入http模块    require</span></div><div><span style="font-size: 9pt;">    2)    server/app = http.createServer(函数(req,res));//创建服务   返回http对象</span></div><div><span style="font-size: 9pt;">            req 请求  浏览器-&gt;服务器</span></div><div><span style="font-size: 9pt;">              res 响应  服务器-&gt;浏览器</span></div><div><span style="font-size: 9pt;">                  响应头设置:    res.writeHead(200,{'Content-Type':'text/html;charset=utf-8'});</span></div><div><span style="font-size: 9pt;">                  res.write(字符/数据&lt;string&gt;&lt;buffer&gt;)  渲染</span></div><div><span style="font-size: 9pt;">    3)     监听：</span></div><div><span style="font-size: 9pt;">        server.listen(端口，[地址]，[回调])    回调：监听成功，回调一次</span></div><div><span style="font-size: 9pt;">            端口: 1-65535    1024以下系统占用   80</span></div><div><span style="font-size: 9pt;">            地址: 虚拟localhost  真实域名</span><a href="http://xx.duapp.com/" style="font-size: 9pt;">xx.duapp.com</a></div><div><span style="font-size: 9pt;">fs 模块  文件操作</span></div><div><span style="font-size: 9pt;">    fs.readFile('文件名',[编码],回调(err,data))  读取文件 返回错误err,或者buffer数据data</span></div><div><span style="font-size: 9pt;">    </span></div><div><span style="font-size: 9pt;">静态页面托管:</span></div><div><span style="font-size: 9pt;">    fs.readFile(文件名,[编码],回调(err,data))/fs.writeFile(文件名,[编码],回调)</span></div><div><span style="font-size: 9pt;">    staticWWW 函数</span></div><div><span style="font-size: 9pt;">动态数据请求:</span></div><div><span style="font-size: 9pt;">    前台: get/post/put/delete/ajax/jsonp.....</span></div><div><span style="font-size: 9pt;">    后台：http[s] 请求 ， 处理方式方式有所不同</span></div><div><span style="font-size: 9pt;">        GET:    req.url  抓取 get请求的数据  字符 切/url模块</span></div><div><span style="font-size: 9pt;">        POST:    req.on('data',(chunk)=&gt;{CHUNK==每次收到的数据buffer})</span></div><div><span style="font-size: 9pt;">                req.on('end',()=&gt;{    接收完毕 切/querystring模块解析 })</span></div><div><span style="font-size: 9pt;">url 模块</span></div><div><span style="font-size: 9pt;">    url.parse(str,true) -&gt; obj  true 把query部分转换正对象</span></div><div><span style="font-size: 9pt;">    url.format(obj) -&gt; string</span></div><div><span style="font-size: 9pt;">    Url {</span></div><div><span style="font-size: 9pt;">      protocol: 'http:',</span></div><div><span style="font-size: 9pt;">      slashes: true,  是否含双斜线</span></div><div><span style="font-size: 9pt;">      auth: null,</span></div><div><span style="font-size: 9pt;">      host: '</span><a href="http://www.baidu.com:8080'/" style="font-size: 9pt;">www.baidu.com:8080'</a><span style="font-size: 9pt;">;,</span></div><div><span style="font-size: 9pt;">      port: '8080',</span></div><div><span style="font-size: 9pt;">      hostname: '</span><a href="http://www.baidu.com'/" style="font-size: 9pt;">www.baidu.com'</a><span style="font-size: 9pt;">;,</span></div><div><span style="font-size: 9pt;">      hash: '#title',</span></div><div><span style="font-size: 9pt;">      search: '?a=1&amp;b=2',</span></div><div><span style="font-size: 9pt;">      query: 'a=1&amp;b=2',</span></div><div><span style="font-size: 9pt;">      pathname: '/abc',</span></div><div><span style="font-size: 9pt;">      path: '/abc?a=1&amp;b=2',</span></div><div><span style="font-size: 9pt;">      href: '</span><a href="http://www.baidu.com:8080/abc?a=1&amp;b=2#title'" style="font-size: 9pt;">http://www.baidu.com:8080/abc?a=1&amp;b=2#title'</a><span style="font-size: 9pt;">;</span></div><div><span style="font-size: 9pt;">    }</span></div><div><span style="font-size: 9pt;">    ---------------------------------------</span></div><div><span style="font-size: 9pt;">querystring 模块    处理字符形式的 数据</span></div><div><span style="font-size: 9pt;">    querystring.parse(str) - Obj</span></div><div><span style="font-size: 9pt;">    querystring.stringify(obj) obj -&gt;str</span></div><div><span style="font-size: 9pt;">    -------------------------------------</span></div><div><span style="font-size: 9pt;">发送请求到服务器:    == http[s]</span></div><div><span style="font-size: 9pt;">     src / href / 地址栏 / submit表单 / ajax / jsonp / background:url(...)</span></div><div><span style="font-size: 9pt;">                             req.url 处理get</span></div><div><span style="font-size: 9pt;">                             req.on('data'/'end') 处理post</span></div><div><span style="font-size: 9pt;">    -------------------------------------</span></div></span>
</div></body></html> 