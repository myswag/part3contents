<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305825 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="366"/>

<div>
<span><div><span style="font-size: 9pt;">day28</span></div><div><span style="font-size: 9pt;"><br/></span></div><div><span style="font-size: 9pt;">----------------------react----------------------</span></div><div><span style="font-size: 9pt;">干嘛的：前端框架，把用户界面抽象成一个个的组件，按需组合成页面</span></div><div><span style="font-size: 9pt;">官网：</span><a href="https://reactjs.org/" style="font-size: 9pt;">https://reactjs.org/</a><span style="font-size: 9pt;">             en</span></div><div><a href="http://www.react-cn.com/" style="font-size: 9pt;">http://www.react-cn.com/</a><span style="font-size: 9pt;">       cn</span></div><div><a href="https://github.com/facebook/react/releases" style="font-size: 9pt;">https://github.com/facebook/react/releases</a><span style="font-size: 9pt;">   git</span></div><div><span style="font-size: 9pt;">框架受欢迎程度  2017-11-2</span></div><div><span style="font-size: 9pt;">    react          79988</span></div><div><span style="font-size: 9pt;">    vue            72393</span></div><div><span style="font-size: 9pt;">    angularJs    26445</span></div><div><span style="font-size: 9pt;">    angular     29445</span></div><div><span style="font-size: 9pt;">        vue        angularJs    react</span></div><div><span style="font-size: 9pt;">指令    √        √            -</span></div><div><span style="font-size: 9pt;">过滤器    √        √            -</span></div><div><span style="font-size: 9pt;">模板引擎√        √            -</span></div><div><span style="font-size: 9pt;">控制器    -        √            -</span></div><div><span style="font-size: 9pt;">共同点：</span></div><div><span style="font-size: 9pt;">    共同点：</span></div><div><span style="font-size: 9pt;">    虚拟DOM，数据驱动,组件式开发        angularJs没有虚拟dom</span></div><div><span style="font-size: 9pt;">react:</span></div><div><span style="font-size: 9pt;">    概念：  数据 == 状态 ~~ 组件状态</span></div><div><span style="font-size: 9pt;">JSX语法：js + html        类XML语法        XML 数据表 ~~ JSON</span></div><div><span style="font-size: 9pt;">    oo.js/  oo.jsx  合法的</span></div><div><span style="font-size: 9pt;">    语法要求：</span></div><div><span style="font-size: 9pt;">        标签要闭合</span></div><div><span style="font-size: 9pt;">        元素必须要有一个顶层元素</span></div><div><span style="font-size: 9pt;">        首字母大写代表组件，小写对应是DOM元素</span></div><div><span style="font-size: 9pt;">环境搭建：</span></div><div><span style="font-size: 9pt;">    a)webpack + webpack-dev-server</span></div><div><span style="font-size: 9pt;">    b) npm install create-react-app    官方脚手架</span></div><div><span style="font-size: 9pt;">        create-react-app 目录</span></div><div><span style="font-size: 9pt;">        npm start</span></div><div><span style="font-size: 9pt;">    c) yeomen 目录        需要安装</span></div><div><span style="font-size: 9pt;">    npm install</span></div><div><span style="font-size: 9pt;">    npm run dev</span></div><div><span style="font-size: 9pt;">渲染（描画）页面</span></div><div><span style="font-size: 9pt;">var React = require('react');</span></div><div><span style="font-size: 9pt;">var ReactDom = require('react-dom');    需要安装+引入</span></div><div><span style="font-size: 9pt;">ReactDom.render(组件/dom,插入点)</span></div><div><span style="font-size: 9pt;">创建组件：    require('react');//需要安装+引入</span></div><div><span style="font-size: 9pt;">    HelloWorld = React.createClass({配置})</span></div><div><span style="font-size: 9pt;">    配置：</span></div><div><span style="font-size: 9pt;">    render:function(){</span></div><div><span style="font-size: 9pt;">        var 变量=数据</span></div><div><span style="font-size: 9pt;">        return html/xml</span></div><div><span style="font-size: 9pt;">        return () 为了排版</span></div><div><span style="font-size: 9pt;">    }</span></div><div><span style="font-size: 9pt;">使用组件：</span></div><div><span style="font-size: 9pt;">    &lt;HelloWorld/&gt;</span></div><div><span style="font-size: 9pt;">    &lt;HelloWorld&gt;&lt;/HelloWorld&gt;</span></div><div><span style="font-size: 9pt;">组件嵌套：</span></div><div><span style="font-size: 9pt;">    在父组件的return html里面,使用&lt;子组件/&gt;</span></div><div><span style="font-size: 9pt;">组件属性(props)：    props在于数据的传递，state在于当前组件的状态。</span></div><div><span style="font-size: 9pt;">    &lt;组件名 属性名=值 属性名2=值2 .. /&gt;    传递属性</span></div><div><span style="font-size: 9pt;">    组件内部：{this.props.属性名}   使用属性</span></div><div><span style="font-size: 9pt;">              this 代表的是组件本身</span></div><div><span style="font-size: 9pt;">    值类型：字符||{表达式/arr/json/undefined/number/fn}</span></div><div><span style="font-size: 9pt;">    this.props.属性名==array 需要循环</span></div><div><span style="font-size: 9pt;">    arr值：this.props.属性名.map(function(){</span></div><div><span style="font-size: 9pt;">        return html</span></div><div><span style="font-size: 9pt;">    })</span></div><div><span style="font-size: 9pt;">    json {json} 报错， 对象无法直接通过{obj}展示-&gt;{obj.key}</span></div><div><span style="font-size: 9pt;">非转义输出：</span></div><div><span style="font-size: 9pt;">    &lt;div dangerouslySetInnerHTML={{__html:'输出html:'+this.state.strong}}&gt;&lt;/div&gt;</span></div><div><span style="font-size: 9pt;">组件之间数据传递(props传递)</span></div><div><span style="font-size: 9pt;">    父到子    props 传递 &lt;Child 属性=状态数据&gt;</span></div><div><span style="font-size: 9pt;">    子到父  props 传递 &lt;Child 属性=父方法&gt;</span></div><div><span style="font-size: 9pt;">            {this.props.属性.bind(this,子数据)}</span></div><div><span style="font-size: 9pt;">组件状态state：(多个组件嵌套，状态最好给顶层组件,子组件只有props)</span></div><div><span style="font-size: 9pt;">    初始状态：getInitialState:function(){return {数据名状态名:值}}</span></div><div><span style="font-size: 9pt;">    读取状态：this.state.数据名</span></div><div><span style="font-size: 9pt;">    修改状态：this.setState({数据名:新值})</span></div><div><span style="font-size: 9pt;">事件：</span></div><div><span style="font-size: 9pt;">    &lt;元素 onClick={this.方法名}&gt;   方法名: 需要组件内部定义</span></div><div><span style="font-size: 9pt;">    &lt;元素 onClick={this.方法名.bind(this,参数)}&gt;   方法名(参数): 需要组件内部定义  </span></div><div><span style="font-size: 9pt;">        ev 就是代理事件对象, 虚拟DOM的事件对象 ev.target|srcElement 返回虚拟DOM</span></div><div><span style="font-size: 9pt;">refs:获取DOM元素</span></div><div><span style="font-size: 9pt;">    给dom元素 设置ref属性=名字</span></div><div><span style="font-size: 9pt;">    组件内部：this.refs.名字 返回dom</span></div><div><span style="font-size: 9pt;">思想:</span></div><div><span style="font-size: 9pt;">    组件拆分目标:为了复用</span></div><div><span style="font-size: 9pt;">    组件如何拆：单一原则</span></div><div><span style="font-size: 9pt;">    状态应该给谁: 尽量给顶层组件,-&gt;props-&gt;子组件</span></div><div><span style="font-size: 9pt;">    setState: 是异步的,所以不能依赖上一个setState的值，作为下一个setState的参数</span></div><div><span style="font-size: 9pt;">        解决：this.setState(function(prevState,props){})</span></div><div><span style="font-size: 9pt;">              函数接收前一个状态值作为第 1 个参数， 并将更新后的值作为第 2个参数</span></div><div><span style="font-size: 9pt;">              </span></div><div><span style="font-size: 9pt;">              更新会被合并,是浅合并</span></div><div><span style="font-size: 9pt;">------------------------------------------------------------------------</span></div><div><span style="font-size: 9pt;">生命周期：</span></div><div><span style="font-size: 9pt;">    组件挂载完毕：componentDidMount</span></div><div><span style="font-size: 9pt;">    组件即将卸载：componentWillUnmount</span></div><div><span style="font-size: 9pt;">组件数据更新(存在期)：</span></div><div><span style="font-size: 9pt;">    是否更新：    shouldComponentUpdate</span></div><div><span style="font-size: 9pt;">    即将更新：    componentWillUpdate</span></div><div><span style="font-size: 9pt;">    描画dom：     render</span></div><div><span style="font-size: 9pt;">    描画结束:    componentDidUpdate</span></div><div><span style="font-size: 9pt;">生命周期流程:</span></div><div><span style="font-size: 9pt;">    实例化 -&gt;  存在期  -&gt; 销毁时</span></div><div><span style="font-size: 9pt;">        实例化:getDefaultProps-&gt;getInitailState-&gt;componentWillMount-&gt;render-&gt;componentDidMount</span></div><div><span style="font-size: 9pt;">        存在期:shouldComponentUpdate-&gt;componentWillUpdate-&gt;render-&gt;componentDidUpdate</span></div><div><span style="font-size: 9pt;">        销毁时: componentWillUnmount</span></div><div><span style="font-size: 9pt;">    实例化:</span></div><div><span style="font-size: 9pt;">        取得默认属性getDefaultProps/初始状态(getInitailState)-&gt;</span></div><div><span style="font-size: 9pt;">        -&gt;即将挂载(componentWillMount)/描画DOM(render)/挂载完毕(componentDidMount)</span></div><div><span style="font-size: 9pt;">    存在期:</span></div><div><span style="font-size: 9pt;">        是否更新/即将更新/描画dom/描画结束</span></div><div><span style="font-size: 9pt;">    销毁时:</span></div><div><span style="font-size: 9pt;">        即将卸载(componentWillUnmount)</span></div><div><span style="font-size: 9pt;">数据交互：</span></div><div><span style="font-size: 9pt;">    jquery</span></div><div><span style="font-size: 9pt;">        npm install jquery -D   -&gt; import &amp; from 'jquery'</span></div><div><span style="font-size: 9pt;">        $.ajax({</span></div><div><span style="font-size: 9pt;">            type:'get/post',</span></div><div><span style="font-size: 9pt;">            url:'...',</span></div><div><span style="font-size: 9pt;">            success:function(res){},</span></div><div><span style="font-size: 9pt;">            error:function(){}</span></div><div><span style="font-size: 9pt;">        })</span></div><div><span style="font-size: 9pt;">    原生:</span></div><div><span style="font-size: 9pt;">        export let ajax=function(){......}   -&gt; mod/ajax.js</span></div><div><span style="font-size: 9pt;">        import {ajax} from './mod.ajax'</span></div><div><span style="font-size: 9pt;">        ajax({....})</span></div><div><span style="font-size: 9pt;">    fetch    原生就有</span></div><div><span style="font-size: 9pt;">    fetch(url).then(成功函数(res))</span></div><div><span style="font-size: 9pt;">    res.ok -&gt; true/false 成功/失败</span></div><div><span style="font-size: 9pt;">    res.status - &gt; 状态码 number</span></div><div><span style="font-size: 9pt;">    res.statusText - &gt; 状态码文本 string</span></div><div><span style="font-size: 9pt;">    res.body 数据 数据流(stream) 需要转换</span></div><div><span style="font-size: 9pt;">        res.text() 转换 文本(string)</span></div><div><span style="font-size: 9pt;">            过程异步：    return res.text()</span></div><div><span style="font-size: 9pt;">            同步： res.text().then((data)=&gt;{})    data:转换后的数据</span></div><div><span style="font-size: 9pt;">    res.json() 转  对象</span></div><div><span style="font-size: 9pt;">    res.text() 转  文本</span></div><div><span style="font-size: 9pt;">css模块化引入:</span></div><div><span style="font-size: 9pt;">    import style from './css/xxx/xx.css'</span></div><div><span style="font-size: 9pt;">    使用: style.类名</span></div><div><span style="font-size: 9pt;">          ....</span></div><div><span style="font-size: 9pt;">    webpack需要配置css-loader：{test: /\.css$/, loader: &quot;style-loader!css-loader?modules&quot;}</span></div><div><span style="font-size: 9pt;">fetch请求数据问题：</span></div><div><span style="font-size: 9pt;">    数据是异步的，render函数会在实例化时就执行(需要处理数据)</span></div><div><br style="font-size: 9pt;"/></div></span>
</div></body></html> 